# äºŒã€Dart åŸºæœ¬æ•°æ®ç±»å‹

## å˜é‡



## é»˜è®¤å€¼

åœ¨`Dart`ä¸­ï¼Œå…·æœ‰ å¯ä¸ºç©ºç±»å‹çš„æœªåˆå§‹åŒ–å˜é‡ çš„åˆå§‹å€¼ä¸º `null`ã€‚ï¼ˆå¦‚æœä½ æœªé€‰æ‹©ä½¿ç”¨`null safety`ï¼Œåˆ™æ¯ä¸ªå˜é‡éƒ½å…·æœ‰å¯ä¸º`null`çš„ç±»å‹ã€‚ï¼‰å³ä¾¿æ•°å­—ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºåœ¨ `Dart` ä¸­ä¸€åˆ‡çš†ä¸ºå¯¹è±¡ï¼Œæ•°å­—ä¹Ÿä¸ä¾‹å¤–ã€‚

```Dart
int? age;
print(age == null);   // æ‰“å°ï¼štrue

// å¦‚æœå¯ç”¨ `null safety`ï¼Œåˆ™å¿…é¡»åœ¨ä½¿ç”¨éç©ºå˜é‡ä¹‹å‰ å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼š
int lineCount = 0;
```

ä¸å¿…åœ¨å£°æ˜äº†è¯¥å˜é‡çš„åœ°æ–¹åˆå§‹åŒ–å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯ä½ å¿…é¡»åœ¨ä½¿ç”¨å®ƒä¹‹å‰ä¸ºå…¶åˆ†é…ä¸€ä¸ªå€¼ã€‚

```Dart
void test() {
  int x;
  // print($x);    // ä¼šæŠ›å¼‚å¸¸
  x = 20;
  print('$x');    // æ‰“å°ï¼š20
}
```

## late å˜é‡



## final å’Œ const (å¸¸é‡)

å¦‚æœä»æœªæ‰“ç®—æ›´æ”¹å˜é‡ï¼Œè¯·ä½¿ç”¨`final`æˆ–`const`æ›¿ä»£`var`ï¼Œæˆ–æ”¾åœ¨ç±»å‹æ³¨é‡Šçš„åé¢ã€‚`final`å˜é‡åªèƒ½è®¾ç½®ä¸€æ¬¡ï¼›`const`å˜é‡æ˜¯`compile-time constants`(ç¼–è¯‘æ—¶å¸¸é‡)ï¼Œ`const`å˜é‡æ˜¯éšå¼çš„`final`ã€‚`final top-level`å˜é‡ æˆ– ç±»å˜é‡åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶è¢«åˆå§‹åŒ–ã€‚

* å®ä¾‹å˜é‡å¯ä»¥æ˜¯ `final` å˜é‡ï¼Œä½†ä¸èƒ½æ˜¯`const`å˜é‡ã€‚

```Dart
final name = "zhangsan";    // æ²¡æœ‰ç±»å‹ä¿®é¥°
final String subName;
subName = "lisi";       // åªèƒ½è®¾ç½®ä¸€æ¬¡
```

* å¦‚æœ`const`å˜é‡åœ¨ç±»çº§åˆ«ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸º`static const`ã€‚åœ¨å£°æ˜ `const` å˜é‡æ—¶å¯ä»¥ç›´æ¥ä¸ºå…¶èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒçš„ `const` å˜é‡ä¸ºå…¶èµ‹å€¼ï¼š

```Dart
const num = 10;
const int num2 = num * 10;
// const å˜é‡åªèƒ½å®šä¹‰æ—¶è®¾ç½®å€¼ï¼Œå¦‚ä¸‹æ³¨é‡Šé”™è¯¯
//   const int num3;  
//   num3 = 100;
print('$num $num2');
```

* `const`å…³é”®å­—ä¸ä»…ç”¨äºå£°æ˜å¸¸é‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºå¸¸é‡å€¼ï¼Œè¯¥å¸¸é‡å€¼å¯ä»¥èµ‹äºˆç»™ä»»ä½•å˜é‡ã€‚ä½ ä¹Ÿå¯ä»¥å°†æ„é€ å‡½æ•°å£°æ˜ä¸º `const` çš„ï¼Œè¿™ç§ç±»å‹çš„æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸å¯æ”¹å˜çš„ã€‚

```Dart
var bar = const [3];    // å˜é‡barå­˜å‚¨å¸¸é‡ [3]ï¼Œbarä»ç„¶å¯ä»¥è¢«ä¿®æ”¹
final foo = const [3];
print(bar == [3]);    // æ‰“å°ï¼šfalse
print(bar == foo);    // æ‰“å°ï¼štrue
  
const baz = [3];    // ç­‰ä»·äº const [3]
print(baz == foo);    // æ‰“å°ï¼štrue
```


## å†…ç½®ç±»å‹

`Dart`è¯­è¨€å¯¹ä»¥ä¸‹å„é¡¹å…·æœ‰ç‰¹æ®Šæ”¯æŒï¼š

* `Numbers`(æ•°å€¼å‹ï¼š`int`ã€`double`)ã€
* `Strings`(`String`)ã€
* `Booleans`(`bool`)ã€
* `Lists`(`List`)ã€
* `Sets` (`Set`)ã€
* `Maps`(`Map`)ã€
* `Runes` (Runes å¸¸ç”¨äºåœ¨ Characters API ä¸­è¿›è¡Œå­—ç¬¦æ›¿æ¢)
* `Symbols` (`Symbol`)
* ç©ºå€¼ (`Null`)

`Dart`æ”¯æŒä½¿ç”¨`literal`(å­—é¢é‡)åˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›ã€‚å¦‚ï¼Œ`"a string"`æ˜¯`string literal`ï¼Œè€Œ`true`æ˜¯`boolean literal`ã€‚

å› ä¸º`Dart`ä¸­çš„æ¯ä¸ªå˜é‡å¼•ç”¨éƒ½æŒ‡å‘ä¸€ä¸ªå¯¹è±¡(å³ä¸€ä¸ªç±»çš„å®ä¾‹)ï¼Œæ‰€ä»¥é€šå¸¸å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å˜é‡ã€‚ä¸€äº›å†…ç½®ç±»å‹å…·æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ã€‚å¦‚ï¼Œå¯ä»¥ä½¿ç”¨`Map()`æ„é€ å‡½æ•°æ¥åˆ›å»º`map`ã€‚

å…¶ä»–ä¸€äº›ç±»å‹åœ¨ `Dart` è¯­è¨€ä¸­ä¹Ÿå…·æœ‰ç‰¹æ®Šä½œç”¨ï¼š

* `Object`ï¼šæ˜¯é™¤ `Null` å¤–çš„æ‰€æœ‰`Dart`ç±»çš„çˆ¶ç±»ã€‚
* `Future` å’Œ `Stream`ï¼šç”¨äºå¼‚æ­¥æ”¯æŒã€‚
* `Iterable`ï¼šç”¨äº`for-in`å¾ªç¯å’ŒåŒæ­¥`generator functions`ã€‚
* `Never`ï¼šè¡¨ç¤ºè¡¨è¾¾å¼æ°¸è¿œæ— æ³•æˆåŠŸå®Œæˆè®¡ç®—ã€‚æœ€å¸¸ç”¨äºæ€»æ˜¯æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ã€‚
* `dynamic`ï¼šæŒ‡ç¤ºç¦ç”¨é™æ€æ£€æŸ¥ï¼Œå°†ç±»å‹æ£€æŸ¥æ¨è¿Ÿåˆ°è¿è¡Œæ—¶ã€‚é€šå¸¸åº”è¯¥ä½¿ç”¨`Object` æˆ– `Object?`ä»£æ›¿ã€‚
* `void`ï¼šè¡¨ç¤ºè¯¥å€¼æ°¸è¿œä¸ä¼šè¢«ä½¿ç”¨ã€‚é€šå¸¸ç”¨ä½œè¿”å›ç±»å‹ã€‚

### Numbers

`Dart`æ•°å­—æœ‰ä¸¤ç§å½¢å¼ï¼š

* `int`
æ•´æ•°å€¼ä¸å¤§äº64ä½ï¼Œå…·ä½“å–å€¼èŒƒå›´ ä¾èµ–äºä¸åŒçš„å¹³å°ã€‚æ•´æ•°å°±æ˜¯ä¸å¸¦å°æ•°ç‚¹çš„æ•°å­—ï¼Œå¦‚ä¸‹ï¼š

```Dart
var x = 1;
var hex = 0xeeeeee;
print('$x $hex');   // æ‰“å°ï¼š1 15658734
```

* `double`
`IEEE 754`æ ‡å‡†æŒ‡å®šçš„64ä½ï¼ˆåŒç²¾åº¦ï¼‰æµ®ç‚¹æ•°ã€‚å¦‚æœæ•°å­—åŒ…å«å°æ•°ç‚¹ï¼Œåˆ™ä¸º `double`

```Dart
var y = 1.1;
var exponents = 1.42e5;
print('$y , $exponents');   // æ‰“å°ï¼š1.1 , 142000
```

`int`å’Œ`double`éƒ½æ˜¯ `num` çš„å­ç±»å‹ã€‚[num](https://api.dart.dev/stable/2.12.2/dart-core/num-class.html) ç±»å‹åŒ…æ‹¬åŸºæœ¬è¿ç®—ç¬¦ï¼Œå¦‚`+ã€-ã€/ã€*`ç­‰ï¼Œåœ¨å…¶æ–¹æ³•ä¸­è¿˜æœ‰ `abs()`ï¼Œ`ceil()` å’Œ `floor()`ã€‚(åœ¨`int`ç±»ä¸­å®šä¹‰äº†æŒ‰ä½è¿ç®—ç¬¦ï¼Œä¾‹å¦‚`>>`ã€‚) å¦‚æœ`num`åŠå…¶å­ç±»å‹æ²¡æœ‰æ‚¨æƒ³è¦çš„å†…å®¹ï¼Œåˆ™[dart:math](https://api.dart.dev/stable/2.12.2/dart-math/dart-math-library.html)åº“å¯èƒ½ä¼šæœ‰ã€‚

* Numbers(æ•°å­—) å’Œ å­—ç¬¦ä¸²çš„è½¬æ¢

```Dart
// String -> int
var sInt = int.parse('10');
// int -> String
var iStr = 10.toString();

// String -> double
var sDouble = double.parse('1.23');

// double -> String
var dStr = 1.2233.toString();
var dPonitStr = 1.2233.toStringAsFixed(2);
```

* æ•°å­—å­—é¢é‡(`Literal numbers`)æ˜¯ `compile-time` å¸¸é‡. 

```Dart
const msPerSecond = 1000;
```

### Strings

`Dart`å­—ç¬¦ä¸²ï¼ˆå³`String`å¯¹è±¡ï¼‰åŒ…å«ä¸€ç³»åˆ—UTF-16ä»£ç å•å…ƒã€‚å¯ä»¥ä½¿ç”¨ å•å¼•å· æˆ– åŒå¼•å· åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼š

```Dart
var s1 = "string string";
String s2 = 'string string';
```

* å­—ç¬¦ä¸²æ’å€¼

å¯ä»¥ä½¿ç”¨ `${expression}` å°†è¡¨è¾¾å¼çš„å€¼æ”¾åœ¨å­—ç¬¦ä¸²ä¸­ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯æ ‡è¯†ç¬¦ï¼Œåˆ™å¯ä»¥çœç•¥`{}`ã€‚ä¸ºäº†è·å–ä¸å¯¹è±¡ç›¸å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œ`Dart`è°ƒç”¨å¯¹è±¡çš„`toString()`æ–¹æ³•ã€‚ 

```Dart
var pi = 3.14;
var s1 = 'start ${pi == 3.1416} to $pi end';
print(s1);    // æ‰“å°ï¼šstart false to 3.14 end
```

* è·å–å­—ç¬¦ä¸²å­—ç¬¦ä¸ªæ•°

å°½é‡ä½¿ç”¨ `string.characters.length` è·å–å­—ç¬¦ä¸²ä¸ªæ•°ï¼›ä¸è¦ä½¿ç”¨ `string.length` ç”šè‡³ `string.runes.length`ã€‚å› ä¸ºå¯¹äºä¸€äº›è¡¨æƒ…ç¬¦å·ï¼Œ`string.characters.length` ç›´è§‚åœ°è¿”å› 1ã€‚å¦ä¸€æ–¹é¢ï¼Œ`string.length` è¿”å› 8ï¼Œ`string.runes.length` è¿”å›5ã€‚

* å¯ä»¥ä½¿ç”¨å¹¶åˆ—æ”¾ç½®å¤šä¸ªå­—ç¬¦ä¸²å­—é¢é‡ æˆ– `+`è¿ç®—ç¬¦æ¥æ‹¼æ¥å­—ç¬¦ä¸²

```Dart
var s1 = 'a'"bb""ccc";
var s2 = 'a' "bb" "ccc";
var s3 = 'a'
"bb"
"ccc";
var s4 = 'a+bb' + 'ccc';
// == è¿ç®—ç¬¦æµ‹è¯•ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰
print('${s1 == s2}, ${s2 == s3}, $s3, $s4');    // æ‰“å°ï¼štrue, true, abbccc, a+bbccc
```

* åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ï¼šä½¿ç”¨å¸¦ å•å¼•å·æˆ–åŒå¼•å·çš„ ä¸‰å¼•å·

```Dart
var s1 = '''
aaa
bbb
''';
var s2 = """ccc
ddd""";
print("$s1 $s2");
```

* é€šè¿‡åœ¨åŸå§‹å­—ç¬¦ä¸²å‰åŠ  `r` æ¥åˆ›å»º `raw` å­—ç¬¦ä¸²ï¼Œå³ä¸ä¼šè¢«åšä»»ä½•å¤„ç†ï¼ˆæ¯”å¦‚è½¬ä¹‰ï¼‰çš„å­—ç¬¦ä¸²ã€‚

```Dart
 var s1 = r'aaa \n bbb';
print(s1);      // æ‰“å°ï¼šaaa \n bbb
var s2 = 'aaa \n bbb';
print(s2);
// aaa 
// bbb
```

* `Literal strings`(å­—é¢é‡å­—ç¬¦ä¸²) æ˜¯ `compile-time constants`(ç¼–è¯‘æ—¶å¸¸é‡)ï¼Œåªè¦ä»»ä½•æ’å€¼è¡¨è¾¾å¼æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå³å…¶è®¡ç®—ç»“æœä¸º `null`ã€æ•°å­—ã€`string`æˆ– `boolean`ã€‚

### Booleans

`Dart`ä½¿ç”¨ `bool` å…³é”®å­—è¡¨ç¤ºå¸ƒå°”ç±»å‹ã€‚åªæœ‰ä¸¤ä¸ªå¯¹è±¡å…·æœ‰å¸ƒå°”ç±»å‹ï¼š`boolean literals` çš„ `true` å’Œ `false`ï¼Œå®ƒä»¬éƒ½æ˜¯`compile-time constants`(ç¼–è¯‘æ—¶å¸¸é‡)ã€‚

`Dart` æ˜¯ `type safety`(ç±»å‹å®‰å…¨çš„)ï¼Œå› æ­¤ä¸å…è®¸ä½¿ç”¨ `if (nonbooleanValue)` æˆ– `assert (nonbooleanValue)` è¿™æ ·çš„ä»£ç æ£€æŸ¥å¸ƒå°”å€¼ï¼Œå³éœ€è¦åƒå¦‚ä¸‹æ˜¾ç¤ºåœ°æ£€æŸ¥å¸ƒå°”å€¼ï¼š

```Dart
var res = true;
if (res) {
print('res is true');     // æ‰“å°ï¼šres is true
}
  
var s = '';
assert(s.isEmpty);
  
var pt = 0;
assert(pt <= 0);
  
Object? ber;
assert(ber == null);
  
var meant = 0 / 0;
assert(meant.isNaN);
```

### Lists

åœ¨`Dart`ä¸­ï¼Œæ•°ç»„æ˜¯`List`å¯¹è±¡ï¼Œå› æ­¤å¤§å¤šæ•°äººéƒ½ç§°å…¶ä¸ºåˆ—è¡¨ã€‚

```Dart
var ls1 = [1, 2, 3];
List<String> ls2 = [];
ls2.add('aa');
print('$ls1 $ls2');   // æ‰“å°ï¼š[1, 2, 3] [aa]
```

* å¯ä»¥åœ¨`Dart`é›†åˆ `literal`çš„æœ€åä¸€é¡¹åé¢æ·»åŠ é€—å·ã€‚é€—å·ç»“å°¾ä¸ä¼šå½±å“é›†åˆï¼Œä½†å¯ä»¥å¸®åŠ©é˜²æ­¢å¤åˆ¶ç²˜è´´é”™è¯¯ã€‚

```Dart
var ls1 = [1, 2, 3, ];
print(ls1);   // æ‰“å°ï¼š[1, 2, 3]
```

* è·å– `list` çš„é•¿åº¦ å’Œ ç´¢å¼•

```Dart
var ls1 = [1, 2, 3];
print(ls1.length);    // æ‰“å°ï¼š3
print(ls1[0]);    // æ‰“å°ï¼š1
```

* é€šè¿‡åœ¨ `list literal` å‰é¢åŠ  `const` æ¥åˆ›å»º `compile-time constant` çš„ `list`

```Dart
 var ls1 = const [1, 2, 3];
ls1[1] = 2;   // è¿è¡Œé”™è¯¯ï¼Œåç»­ä»£ç ä¸ä¼šæ‰§è¡Œ

const List ls2 = [1, 2, 3];
ls2[1] = 2;   // è¿è¡Œé”™è¯¯ï¼Œåç»­ä»£ç ä¸ä¼šæ‰§è¡Œ
```

* Dart 2.3å¼•å…¥äº† `spread operator (...)`(æ‰©å±•æ“ä½œç¬¦) å’Œ `null-aware spread operator (...?)`(ç©ºæ„ŸçŸ¥æ‰©å±•æ“ä½œç¬¦)ï¼Œå®ƒä»¬æä¾›äº†ä¸€ç§å°†å¤šä¸ªå…ƒç´ æ’å…¥é›†åˆçš„ç®€æ´æ–¹æ³•ã€‚

ä½¿ç”¨ `spread operator (...)` å°†ä¸€ä¸ª `List` æ‰€æœ‰å€¼æ’å…¥åˆ°å¦ä¸€ä¸ª `List`ï¼š

```Dart
List ls1 = const [1, 2, 3];
var ls2 = [4, 5, 6, ...ls1];
print(ls2);   // æ‰“å°ï¼š[4, 5, 6, 1, 2, 3]
```

å¦‚æœ `null-aware spread operator (...?)` å³è¾¹çš„è¡¨è¾¾å¼å¯èƒ½ä¸º `null`ï¼Œåˆ™å¯ä»¥é€šè¿‡ä½¿ç”¨å¯è¯†åˆ« `null` çš„æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼Ÿï¼‰æ¥é¿å…å‡ºç°å¼‚å¸¸ï¼š

```Dart
List<int>? ls3;
print(ls3);   // æ‰“å°ï¼šnull
  
List ls4 = [1, 2, 3, ...?ls3];
print(ls4);   // æ‰“å°ï¼š[1, 2, 3]
```

* `Dart` æä¾›äº† `collection if`(é›†åˆä¸­çš„ if ) å’Œ `collection for`(é›†åˆä¸­çš„ for)ï¼Œåœ¨æ„å»ºé›†åˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¡ä»¶åˆ¤æ–­ (if) å’Œå¾ªç¯ (for)ã€‚

```Dart
var res = true;
  
List<int> ls1 = [1, 2, 3, if (res) 123];
print(ls1);     // æ‰“å°ï¼š[1, 2, 3, 123]
```

```Dart
var ls2 = [1, 2, 3];
var ls3 = ['a', for (var i in ls2) "+$i"];
print(ls3);   // æ‰“å°ï¼š[a, +1, +2, +3]
```

### Set

`Dart`ä¸­çš„ `Set` æ˜¯æ— åºçš„ã€ä¸”å…ƒç´ ä¸é‡å¤é›†åˆã€‚é›†æ–‡å­—å’Œé›†ç±»å‹ä¸ºé›†æä¾›Dartæ”¯æŒã€‚

ä½¿ç”¨ `set literal` åˆ›å»º `set`ï¼š

```Dart
Set st1 = {'aa', 'bb', 'cc', 'bb'};
print(st1);   // æ‰“å°ï¼š{aa, bb, cc}
```

åˆ›å»ºä¸€ä¸ªç©º `Set`:

```Dart
Set<String> st2 = {};
Set st3 = <String>{};
Set st4 = {};
  
print('$st2 $st3 $st4');   // æ‰“å°ï¼š{} {} {}
  
var st5 = {};   // æ³¨æ„ï¼šè¿™æ˜¯åˆ›å»ºä¸€ä¸ª mapï¼Œè€Œä¸æ˜¯ Set
```

* ä½¿ç”¨ `add()` æˆ– `addAll()` å‘ `Set` ä¸­æ·»åŠ  item

```
var st0 = {'11', '22', '33'};
var st1 = <String>{};
Set st2 = {};
  
st1.add('aa');
st1.addAll(st0);
print(st1);   // æ‰“å°ï¼š{aa, 11, 22, 33}
  
st2.add(1);
st2.addAll(st0);
print(st2);   // æ‰“å°ï¼š{1, 11, 22, 33}

// ä½¿ç”¨ length è·å–itemçš„ä¸ªæ•°
print('${st2.length}');   // æ‰“å°ï¼š4
```

* åˆ›å»º `compile-time constant`(ç¼–è¯‘æ—¶å¸¸é‡) `Set`

```Dart
final st1 = const {1, 4, 5};
//   st1.add(3);
  
const Set st2 = {1, 2, 3};
//   st2.add(4);
```

* `Set` å’Œ `List` ä¸€æ ·ï¼Œéƒ½æ”¯æŒ `spread operators (... and ...?) ` å’Œ `collection if` å’Œ `for`.

```Dart
Set st1 = const {1, 4, 5};
Set<int> st2 = {3, 9, ...st1};
print(st2);   // æ‰“å° {3, 9, 1, 4, 5}
  
Set<int>? st3;
var st4 = {9, 2, 12, ...?st3};
print(st4);   // æ‰“å°ï¼š{9, 2, 12}
```

```Dart
const res = false;
var st1 = {1, 2, 3, if (res == false) 6};
print(st1);   // æ‰“å°ï¼š{1, 2, 3, 6}
  
var st2 = {"a", "b", for (var i in st1) "+$i"};
print(st2);   // æ‰“å°ï¼š{a, b, +1, +2, +3, +6}
```

### Map

`map`(æ˜ å°„)æ˜¯`keys-values`å…³è”çš„å¯¹è±¡ã€‚ `keys`å’Œ`values`éƒ½å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚ æ¯ä¸ª`key`ä»…å‡ºç°ä¸€æ¬¡ï¼Œç›¸åŒçš„`value`å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚`Dart`å¯¹`maps`æä¾›`map literals`å’Œ`map type`çš„æ”¯æŒã€‚

* é€šè¿‡ `map literals` åˆ›å»º `Map`

```Dart
var mp1 = {"s1": 1, "s2": 3};
var mp2 = {1: 1, 2: 3};
print("$mp1 $mp2");     // æ‰“å°ï¼š{s1: 1, s2: 3} {1: 1, 2: 3}
```

* ä½¿ç”¨ `Map` æ„é€ å‡½æ•°åˆ›å»º

```Dart
var mp1 = Map<String, int>();
mp1['s1'] = 10;
mp1['s2'] = 20;
print(mp1);     // æ‰“å°ï¼š{s1: 10, s2: 20}

var mp = <String, int>{};
print(mp);
mp["a"] = 10;
print(mp);      // æ‰“å°ï¼š{a: 10}
```

* ä» `Map` ä¸­æ£€ç´¢å€¼ï¼Œ`length`è·å–`Map`é”®å€¼å¯¹çš„æ•°é‡

```Dart
var mp = {'s1': 10, 's2': 20};
print('${mp['s1']} ${mp['s3']}');   // æ‰“å°ï¼š10 null
print(mp.length);   // æ‰“å°ï¼š2
```

* åœ¨ `map literal` å‰é¢åŠ  `const` æ¥åˆ›å»º`compile-time constant` çš„ `map`

```Dart
final mp = const {'s1': 10, 's2': 20};
```

* å’Œ `List` ä¸€æ ·ï¼Œ`Map`æ”¯æŒ `spread operators (... å’Œ ...?)` ä»¥åŠ ` collection if å’Œ for`

```Dart
final mp = const {'s1': 10, 's2': 20};
var mp1 = {"s3": 30, ...mp};
print(mp1);   // æ‰“å°ï¼š{s3: 30, s1: 10, s2: 20}
  
Map<String, int>? mpp;
var mp2 = {"s3": 33, ...?mpp};
print(mp2);   // æ‰“å°ï¼š{s3: 33}
```

```Dart
const res = true;
var mp1 = {"23": "aa", if (res) "33": "bbb"};
print(mp1);     // æ‰“å°ï¼š{23: aa, 33: bbb}
```

## æšä¸¾

æšä¸¾ç±»å‹ä¹Ÿç§°ä¸º `enumerations` æˆ– `enums` ï¼Œ æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œç”¨äºè¡¨ç¤ºæ•°é‡å›ºå®šçš„å¸¸é‡å€¼ã€‚

* ä½¿ç”¨ `enum` å…³é”®å­—å£°æ˜æšä¸¾ç±»å‹ï¼š

* æ¯ä¸€ä¸ªæšä¸¾å€¼éƒ½æœ‰ä¸€ä¸ªåä¸º index æˆå‘˜å˜é‡çš„ Getter æ–¹æ³•ï¼Œå®ƒè¿”å›ä»¥ 0 ä¸ºåŸºå‡†ç´¢å¼•çš„ä½ç½®å€¼ã€‚

* è¦è·å–æšä¸¾ä¸­æ‰€æœ‰å€¼çš„åˆ—è¡¨ï¼Œè¯·ä½¿ç”¨æšä¸¾çš„ `values` å¸¸é‡ã€‚

* æšä¸¾ç±»å‹å…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š æšä¸¾ä¸èƒ½è¢«å­ç±»åŒ–ï¼Œ`mixin`æˆ–`implements`ã€‚æšä¸¾ä¸èƒ½è¢«æ˜¾å¼å®ä¾‹åŒ–ã€‚

```Dart
enum Color { red, green, blue }

print(Color.red.index);     // æ‰“å°ï¼š0

List<Color> colors = Color.values;
print(colors);      // æ‰“å°ï¼š[Color.red, Color.green, Color.blue]

var aColor = Color.red;
switch (aColor) {
  case Color.green:
    print('color is green');
    break;
  default:
    print(aColor);
    break;
}
```

## Runes å’Œ grapheme clusters

åœ¨`Dart`ä¸­ï¼Œ[runes](https://api.dart.dev/stable/2.12.2/dart-core/Runes-class.html)å…¬å¼€å­—ç¬¦ä¸²çš„`Unicode code points`(ç ä½)ã€‚å¯ä»¥ä½¿ç”¨[characters package](https://pub.dev/packages/characters)æ¥æŸ¥çœ‹æˆ–æ“ä½œ`user-perceived characters`(ç”¨æˆ·æ„ŸçŸ¥çš„å­—ç¬¦)ï¼Œä¹Ÿç§°ä¸ºUnicodeï¼ˆæ‰©å±•ï¼‰` grapheme clusters`(å­—ç¬¦ç°‡)ã€‚

`Unicode`ä¸ºä¸–ç•Œä¸Šæ‰€æœ‰ä¹¦å†™ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ¯ä¸ªå­—æ¯ã€æ•°å­—å’Œç¬¦å·å®šä¹‰äº†å”¯ä¸€çš„æ•°å€¼ã€‚ç”±äº`Dart`å­—ç¬¦ä¸²æ˜¯`UTF-16`ä»£ç å•å…ƒçš„åºåˆ—ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦è¡¨ç¤º 32 ä½çš„ Unicode æ•°å€¼åˆ™éœ€è¦ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ã€‚è¡¨ç¤º`Unicode code point`å¸¸ç”¨çš„æ–¹æ³•æ˜¯`\uXXXX`ï¼Œå…¶ä¸­`XXXX`æ˜¯4ä½åå…­è¿›åˆ¶å€¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ï¼ˆâ™¥ï¼‰ä¸º`\u2665`ã€‚è¦æŒ‡å®šå¤šäºæˆ–å°‘äº4ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œè¯·å°†å€¼æ”¾åœ¨å¤§æ‹¬å·ä¸­ã€‚ä¾‹å¦‚ï¼Œç¬‘çš„è¡¨æƒ…ç¬¦å·ï¼ˆğŸ˜†ï¼‰ä¸º`\u{1f606}`ã€‚

å¦‚æœéœ€è¦è¯»å–æˆ–ç¼–å†™å•ä¸ª`Unicode characters`ï¼Œè¯·ä½¿ç”¨`characters package`åœ¨`String`ä¸Šå®šä¹‰çš„`characters getter`ã€‚è¿”å›çš„`Characters`å¯¹è±¡æ˜¯ä½œä¸º`grapheme clusters`åºåˆ—çš„å­—ç¬¦ä¸²ã€‚

æœ‰å…³ä½¿ç”¨`character package`æ“ä½œå­—ç¬¦ä¸²çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§`character package`çš„[example](https://pub.dev/packages/characters/example)å’Œ [API reference](https://pub.dev/documentation/characters/latest/)ã€‚

å¦‚ä¸‹characters APIçš„ç¤ºä¾‹ï¼š

```Dart
import 'package:characters/characters.dart';
...
var hi = 'Hi ğŸ‡©ğŸ‡°';
print(hi);
print('The end of the string: ${hi.substring(hi.length - 1)}');
print('The last character: ${hi.characters.last}\n');
```

## Symbols

[Symbol](https://api.dart.dev/stable/2.12.2/dart-core/Symbol-class.html) å¯¹è±¡ä»£è¡¨åœ¨ `Dart` ç¨‹åºä¸­å£°æ˜çš„è¿ç®—ç¬¦æˆ–æ ‡è¯†ç¬¦ã€‚å¯èƒ½æ°¸è¿œä¸éœ€è¦ä½¿ç”¨`symbols`ï¼Œä½†æ˜¯`symbols`å¯¹äºé‚£äº›é€šè¿‡åç§°å¼•ç”¨æ ‡è¯†ç¬¦çš„ API å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºä»£ç å‹ç¼©åï¼Œå°½ç®¡æ ‡è¯†ç¬¦çš„åç§°ä¼šæ”¹å˜ï¼Œä½†æ˜¯å®ƒä»¬çš„ `Symbol` ä¼šä¿æŒä¸å˜ã€‚

è¦è·å–æ ‡è¯†ç¬¦çš„`symbol`å·ï¼Œè¯·ä½¿ç”¨`symbol literal`ï¼Œå®ƒåªæ˜¯`#`åè·Ÿæ ‡è¯†ç¬¦ï¼šï¼š

`symbol literals` æ˜¯ `compile-time constants`ã€‚

```Dart
#radix
#bar
```

## å­¦ä¹ èµ„æº

[Dart æ¦‚è¿° * è‹±æ–‡](https://dart.dev/overview)

[Dart ç¼–ç¨‹è¯­è¨€æ¦‚è§ˆ * ä¸­æ–‡](https://www.dartcn.com/guides/language/language-tour) æˆ–è€… [Dart ä¸­æ–‡](https://dart.cn/guides/language/language-tour)

[DartPad](https://dart.dev/tools/dartpad)

[å¾®ä¿¡å…¬å·ï¼ŒFSAå…¨æ ˆè¡ŒåŠ¨ * Dartçš„åŸºç¡€è¯­æ³•](https://mp.weixin.qq.com/s/sc4yRkeryqQ5P6hpQIFQ6w)