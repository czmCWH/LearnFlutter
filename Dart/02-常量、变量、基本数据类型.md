# äºŒã€Dart åŸºæœ¬æ•°æ®ç±»å‹

## å˜é‡



## é»˜è®¤å€¼

åœ¨`Dart`ä¸­ï¼Œå…·æœ‰ å¯ä¸ºç©ºç±»å‹çš„æœªåˆå§‹åŒ–å˜é‡ çš„åˆå§‹å€¼ä¸º `null`ã€‚ï¼ˆå¦‚æœä½ æœªé€‰æ‹©ä½¿ç”¨`null safety`ï¼Œåˆ™æ¯ä¸ªå˜é‡éƒ½å…·æœ‰å¯ä¸º`null`çš„ç±»å‹ã€‚ï¼‰å³ä¾¿æ•°å­—ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºåœ¨ `Dart` ä¸­ä¸€åˆ‡çš†ä¸ºå¯¹è±¡ï¼Œæ•°å­—ä¹Ÿä¸ä¾‹å¤–ã€‚

```Dart
int? age;
print(age == null);   // æ‰“å°ï¼štrue

// å¦‚æœå¯ç”¨ `null safety`ï¼Œåˆ™å¿…é¡»åœ¨ä½¿ç”¨éç©ºå˜é‡ä¹‹å‰ å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼š
int lineCount = 0;
```

ä¸å¿…åœ¨å£°æ˜äº†è¯¥å˜é‡çš„åœ°æ–¹åˆå§‹åŒ–å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯ä½ å¿…é¡»åœ¨ä½¿ç”¨å®ƒä¹‹å‰ä¸ºå…¶åˆ†é…ä¸€ä¸ªå€¼ã€‚

```Dart
void test() {
  int x;
  // print($x);    // ä¼šæŠ›å¼‚å¸¸
  x = 20;
  print('$x');    // æ‰“å°ï¼š20
}
```

## late å˜é‡



## final å’Œ const (å¸¸é‡)

å¦‚æœä»æœªæ‰“ç®—æ›´æ”¹å˜é‡ï¼Œè¯·ä½¿ç”¨`final`æˆ–`const`æ›¿ä»£`var`ï¼Œæˆ–æ”¾åœ¨ç±»å‹æ³¨é‡Šçš„åé¢ã€‚`final`å˜é‡åªèƒ½è®¾ç½®ä¸€æ¬¡ï¼›`const`å˜é‡æ˜¯`compile-time constants`(ç¼–è¯‘æ—¶å¸¸é‡)ï¼Œ`const`å˜é‡æ˜¯éšå¼çš„`final`ã€‚`final top-level`å˜é‡ æˆ– ç±»å˜é‡åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶è¢«åˆå§‹åŒ–ã€‚

* å®ä¾‹å˜é‡å¯ä»¥æ˜¯ `final` å˜é‡ï¼Œä½†ä¸èƒ½æ˜¯`const`å˜é‡ã€‚

```Dart
final name = "zhangsan";    // æ²¡æœ‰ç±»å‹ä¿®é¥°
final String subName;
subName = "lisi";       // åªèƒ½è®¾ç½®ä¸€æ¬¡
```

* å¦‚æœ`const`å˜é‡åœ¨ç±»çº§åˆ«ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸º`static const`ã€‚åœ¨å£°æ˜ `const` å˜é‡æ—¶å¯ä»¥ç›´æ¥ä¸ºå…¶èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒçš„ `const` å˜é‡ä¸ºå…¶èµ‹å€¼ï¼š

```Dart
const num = 10;
const int num2 = num * 10;
// const å˜é‡åªèƒ½å®šä¹‰æ—¶è®¾ç½®å€¼ï¼Œå¦‚ä¸‹æ³¨é‡Šé”™è¯¯
//   const int num3;  
//   num3 = 100;
print('$num $num2');
```

* `const`å…³é”®å­—ä¸ä»…ç”¨äºå£°æ˜å¸¸é‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºå¸¸é‡å€¼ï¼Œè¯¥å¸¸é‡å€¼å¯ä»¥èµ‹äºˆç»™ä»»ä½•å˜é‡ã€‚ä½ ä¹Ÿå¯ä»¥å°†æ„é€ å‡½æ•°å£°æ˜ä¸º `const` çš„ï¼Œè¿™ç§ç±»å‹çš„æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸å¯æ”¹å˜çš„ã€‚

```Dart
var bar = const [3];    // å˜é‡barå­˜å‚¨å¸¸é‡ [3]ï¼Œbarä»ç„¶å¯ä»¥è¢«ä¿®æ”¹
final foo = const [3];
print(bar == [3]);    // æ‰“å°ï¼šfalse
print(bar == foo);    // æ‰“å°ï¼štrue
  
const baz = [3];    // ç­‰ä»·äº const [3]
print(baz == foo);    // æ‰“å°ï¼štrue
```


## å†…ç½®ç±»å‹

`Dart`è¯­è¨€å¯¹ä»¥ä¸‹å„é¡¹å…·æœ‰ç‰¹æ®Šæ”¯æŒï¼š

* `Numbers`(æ•°å€¼å‹ï¼š`int`ã€`double`)ã€
* `Strings`(`String`)ã€
* `Booleans`(`bool`)ã€
* `Lists`(`List`)ã€
* `Sets` (`Set`)ã€
* `Maps`(`Map`)ã€
* `Runes` (Runes å¸¸ç”¨äºåœ¨ Characters API ä¸­è¿›è¡Œå­—ç¬¦æ›¿æ¢)
* `Symbols` (`Symbol`)
* ç©ºå€¼ (`Null`)

`Dart`æ”¯æŒä½¿ç”¨`literal`(å­—é¢é‡)åˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›ã€‚å¦‚ï¼Œ`"a string"`æ˜¯`string literal`ï¼Œè€Œ`true`æ˜¯`boolean literal`ã€‚

å› ä¸º`Dart`ä¸­çš„æ¯ä¸ªå˜é‡å¼•ç”¨éƒ½æŒ‡å‘ä¸€ä¸ªå¯¹è±¡(å³ä¸€ä¸ªç±»çš„å®ä¾‹)ï¼Œæ‰€ä»¥é€šå¸¸å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å˜é‡ã€‚ä¸€äº›å†…ç½®ç±»å‹å…·æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ã€‚å¦‚ï¼Œå¯ä»¥ä½¿ç”¨`Map()`æ„é€ å‡½æ•°æ¥åˆ›å»º`map`ã€‚

å…¶ä»–ä¸€äº›ç±»å‹åœ¨ `Dart` è¯­è¨€ä¸­ä¹Ÿå…·æœ‰ç‰¹æ®Šä½œç”¨ï¼š

* `Object`ï¼šæ˜¯é™¤ `Null` å¤–çš„æ‰€æœ‰`Dart`ç±»çš„çˆ¶ç±»ã€‚
* `Future` å’Œ `Stream`ï¼šç”¨äºå¼‚æ­¥æ”¯æŒã€‚
* `Iterable`ï¼šç”¨äº`for-in`å¾ªç¯å’ŒåŒæ­¥`generator functions`ã€‚
* `Never`ï¼šè¡¨ç¤ºè¡¨è¾¾å¼æ°¸è¿œæ— æ³•æˆåŠŸå®Œæˆè®¡ç®—ã€‚æœ€å¸¸ç”¨äºæ€»æ˜¯æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ã€‚
* `dynamic`ï¼šæŒ‡ç¤ºç¦ç”¨é™æ€æ£€æŸ¥ï¼Œå°†ç±»å‹æ£€æŸ¥æ¨è¿Ÿåˆ°è¿è¡Œæ—¶ã€‚é€šå¸¸åº”è¯¥ä½¿ç”¨`Object` æˆ– `Object?`ä»£æ›¿ã€‚
* `void`ï¼šè¡¨ç¤ºè¯¥å€¼æ°¸è¿œä¸ä¼šè¢«ä½¿ç”¨ã€‚é€šå¸¸ç”¨ä½œè¿”å›ç±»å‹ã€‚

### Numbers

`Dart`æ•°å­—æœ‰ä¸¤ç§å½¢å¼ï¼š

`int`å’Œ`double`éƒ½æ˜¯ `num` çš„å­ç±»å‹ã€‚[num](https://api.dart.dev/stable/2.12.2/dart-core/num-class.html) ç±»å‹åŒ…æ‹¬åŸºæœ¬è¿ç®—ç¬¦ï¼Œå¦‚`+ã€-ã€/ã€*`ç­‰ï¼Œåœ¨å…¶æ–¹æ³•ä¸­è¿˜æœ‰ `abs()`ï¼Œ`ceil()` å’Œ `floor()`ã€‚(åœ¨`int`ç±»ä¸­å®šä¹‰äº†æŒ‰ä½è¿ç®—ç¬¦ï¼Œä¾‹å¦‚`>>`ã€‚) å¦‚æœ`num`åŠå…¶å­ç±»å‹æ²¡æœ‰æ‚¨æƒ³è¦çš„å†…å®¹ï¼Œåˆ™[dart:math](https://api.dart.dev/stable/2.12.2/dart-math/dart-math-library.html)åº“å¯èƒ½ä¼šæœ‰ã€‚



## æšä¸¾


* ä½¿ç”¨ `enum` å…³é”®å­—å£°æ˜æšä¸¾ç±»å‹ï¼š

* æ¯ä¸€ä¸ªæšä¸¾å€¼éƒ½æœ‰ä¸€ä¸ªåä¸º index æˆå‘˜å˜é‡çš„ Getter æ–¹æ³•ï¼Œå®ƒè¿”å›ä»¥ 0 ä¸ºåŸºå‡†ç´¢å¼•çš„ä½ç½®å€¼ã€‚

* è¦è·å–æšä¸¾ä¸­æ‰€æœ‰å€¼çš„åˆ—è¡¨ï¼Œè¯·ä½¿ç”¨æšä¸¾çš„ `values` å¸¸é‡ã€‚

* æšä¸¾ç±»å‹å…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š æšä¸¾ä¸èƒ½è¢«å­ç±»åŒ–ï¼Œ`mixin`æˆ–`implements`ã€‚æšä¸¾ä¸èƒ½è¢«æ˜¾å¼å®ä¾‹åŒ–ã€‚

```Dart
enum Color { red, green, blue }

print(Color.red.index);     // æ‰“å°ï¼š0

List<Color> colors = Color.values;
print(colors);      // æ‰“å°ï¼š[Color.red, Color.green, Color.blue]

var aColor = Color.red;
switch (aColor) {
  case Color.green:
    print('color is green');
    break;
  default:
    print(aColor);
    break;
}
```

## Runes å’Œ grapheme clusters

åœ¨`Dart`ä¸­ï¼Œ[runes](https://api.dart.dev/stable/2.12.2/dart-core/Runes-class.html)å…¬å¼€å­—ç¬¦ä¸²çš„`Unicode code points`(ç ä½)ã€‚å¯ä»¥ä½¿ç”¨[characters package](https://pub.dev/packages/characters)æ¥æŸ¥çœ‹æˆ–æ“ä½œ`user-perceived characters`(ç”¨æˆ·æ„ŸçŸ¥çš„å­—ç¬¦)ï¼Œä¹Ÿç§°ä¸ºUnicodeï¼ˆæ‰©å±•ï¼‰` grapheme clusters`(å­—ç¬¦ç°‡)ã€‚

`Unicode`ä¸ºä¸–ç•Œä¸Šæ‰€æœ‰ä¹¦å†™ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ¯ä¸ªå­—æ¯ã€æ•°å­—å’Œç¬¦å·å®šä¹‰äº†å”¯ä¸€çš„æ•°å€¼ã€‚ç”±äº`Dart`å­—ç¬¦ä¸²æ˜¯`UTF-16`ä»£ç å•å…ƒçš„åºåˆ—ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦è¡¨ç¤º 32 ä½çš„ Unicode æ•°å€¼åˆ™éœ€è¦ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ã€‚è¡¨ç¤º`Unicode code point`å¸¸ç”¨çš„æ–¹æ³•æ˜¯`\uXXXX`ï¼Œå…¶ä¸­`XXXX`æ˜¯4ä½åå…­è¿›åˆ¶å€¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ï¼ˆâ™¥ï¼‰ä¸º`\u2665`ã€‚è¦æŒ‡å®šå¤šäºæˆ–å°‘äº4ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œè¯·å°†å€¼æ”¾åœ¨å¤§æ‹¬å·ä¸­ã€‚ä¾‹å¦‚ï¼Œç¬‘çš„è¡¨æƒ…ç¬¦å·ï¼ˆğŸ˜†ï¼‰ä¸º`\u{1f606}`ã€‚

å¦‚æœéœ€è¦è¯»å–æˆ–ç¼–å†™å•ä¸ª`Unicode characters`ï¼Œè¯·ä½¿ç”¨`characters package`åœ¨`String`ä¸Šå®šä¹‰çš„`characters getter`ã€‚è¿”å›çš„`Characters`å¯¹è±¡æ˜¯ä½œä¸º`grapheme clusters`åºåˆ—çš„å­—ç¬¦ä¸²ã€‚

æœ‰å…³ä½¿ç”¨`character package`æ“ä½œå­—ç¬¦ä¸²çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§`character package`çš„[example](https://pub.dev/packages/characters/example)å’Œ [API reference](https://pub.dev/documentation/characters/latest/)ã€‚

å¦‚ä¸‹characters APIçš„ç¤ºä¾‹ï¼š

```Dart
import 'package:characters/characters.dart';
...
var hi = 'Hi ğŸ‡©ğŸ‡°';
print(hi);
print('The end of the string: ${hi.substring(hi.length - 1)}');
print('The last character: ${hi.characters.last}\n');
```

## Symbols

[Symbol](https://api.dart.dev/stable/2.12.2/dart-core/Symbol-class.html) å¯¹è±¡ä»£è¡¨åœ¨ `Dart` ç¨‹åºä¸­å£°æ˜çš„è¿ç®—ç¬¦æˆ–æ ‡è¯†ç¬¦ã€‚å¯èƒ½æ°¸è¿œä¸éœ€è¦ä½¿ç”¨`symbols`ï¼Œä½†æ˜¯`symbols`å¯¹äºé‚£äº›é€šè¿‡åç§°å¼•ç”¨æ ‡è¯†ç¬¦çš„ API å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºä»£ç å‹ç¼©åï¼Œå°½ç®¡æ ‡è¯†ç¬¦çš„åç§°ä¼šæ”¹å˜ï¼Œä½†æ˜¯å®ƒä»¬çš„ `Symbol` ä¼šä¿æŒä¸å˜ã€‚

è¦è·å–æ ‡è¯†ç¬¦çš„`symbol`å·ï¼Œè¯·ä½¿ç”¨`symbol literal`ï¼Œå®ƒåªæ˜¯`#`åè·Ÿæ ‡è¯†ç¬¦ï¼šï¼š

`symbol literals` æ˜¯ `compile-time constants`ã€‚

```Dart
#radix
#bar
```

## å­¦ä¹ èµ„æº

[Dart æ¦‚è¿° * è‹±æ–‡](https://dart.dev/overview)

[Dart ç¼–ç¨‹è¯­è¨€æ¦‚è§ˆ * ä¸­æ–‡](https://www.dartcn.com/guides/language/language-tour) æˆ–è€… [Dart ä¸­æ–‡](https://dart.cn/guides/language/language-tour)

[DartPad](https://dart.dev/tools/dartpad)

[å¾®ä¿¡å…¬å·ï¼ŒFSAå…¨æ ˆè¡ŒåŠ¨ * Dartçš„åŸºç¡€è¯­æ³•](https://mp.weixin.qq.com/s/sc4yRkeryqQ5P6hpQIFQ6w)