# ä¸€ã€è·¯ç”±å’Œå¯¼èˆª

Flutterè·¯ç”±å’Œå¯¼èˆªçš„æ¦‚è§ˆï¼Œ<https://docs.flutter.cn/ui/navigation>
Flutter ä¸­æ–‡ç¤¾åŒºæ•™ç¨‹ï¼Œ<https://docs.flutter.cn/community/tutorials> ğŸ‘
<https://docs.flutter.cn/cookbook/navigation>ï¼ŒFlutter å¯¼èˆªç›¸å…³å®ç”¨æ•™ç¨‹ (Cookbook)ã€‚
å­¦ä¹  Flutter çš„æ–°å¯¼èˆªå’Œè·¯ç”±ç³»ç»Ÿï¼Œ<https://blog.flutter.dev/learning-flutters-new-navigation-and-routing-system-7c9068155ade> & <https://mp.weixin.qq.com/s/zGpzJahDSTZDhWqYmkzi5g>

Flutter æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿï¼Œç”¨äºåœ¨å±å¹•ä¹‹é—´å¯¼èˆª å’Œ å¤„ç† [Deep linking](https://docs.flutter.cn/ui/navigation/deep-linking)ã€‚
  - Navigatorï¼Œé€‚ç”¨äºæ²¡æœ‰å¤æ‚ deep linking çš„å°å‹ Appï¼›
  - Routerï¼Œåœ¨æœ‰ç‰¹å®š deep linking å’Œ å¯¼èˆª è¦æ±‚çš„ App ä¸­ä½¿ç”¨ï¼›

Flutter æœ‰ä¸€ä¸ªå‘½ä»¤å¼è·¯ç”±æœºåˆ¶ï¼Œå³ Navigator ç»„ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´ä¸ºæƒ¯ç”¨çš„å£°æ˜å¼è·¯ç”±æœºåˆ¶ï¼ˆç±»ä¼¼äº widget ä¸­ä½¿ç”¨çš„ build æ–¹æ³•ï¼‰ï¼Œå³ Routerã€‚è¿™ä¸¤ä¸ªç³»ç»Ÿå¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼ˆäº‹å®ä¸Šï¼Œå£°æ˜å¼ç³»ç»Ÿæ˜¯ä½¿ç”¨å‘½ä»¤å¼ç³»ç»Ÿæ„å»ºçš„ï¼‰ã€‚


# äºŒã€Navigator å¯¼èˆªç»„ä»¶

Navigatorï¼Œæ˜¯ä¸€ä¸ªç®¡ç† Route å¯¹è±¡æ ˆçš„ç»„ä»¶ã€‚å¹¶æä¾›ä¸¤ç§ç®¡ç† Route å¯¹è±¡æ ˆçš„æ–¹å¼ï¼š
  - å‘½ä»¤å¼ APIï¼Œ`Navigator.push` å’Œ `Navigator.pop`ã€‚
  - å£°æ˜å¼ API `Navigator.pages`ï¼Œå®ƒæ˜¯ `Navigator 2.0` æ–°å¢çš„ APIã€‚

Route è·¯ç”±ï¼Œç”± Navigator ç®¡ç†çš„å¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªå±å¹•ã€é¡µé¢ï¼ˆFlutter ä¸­ç§°ä¸º â€œè·¯ç”±â€ï¼‰ã€‚
Route æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæœ€ç»ˆå®ç°ç±»ä¸ºï¼š`CupertinoPageRoute<T>ã€MaterialPageRoute<T>ã€PageRouteBuilder<T>`ã€‚`<T>` è¡¨ç¤ºè·¯ç”±çš„è¿”å›å€¼ç±»å‹ã€‚å…¶ä¸­ `PageRouteBuilder<T>` ç”¨äºè‡ªå®šä¹‰è·¯ç”±è·³è½¬åŠ¨ç”»è¿‡æ¸¡æ•ˆæœã€‚

## Navigator å‘½ä»¤å¼ API

è™½ç„¶å¯ä»¥ç›´æ¥åˆ›å»º `Navigator`ï¼Œä½†æœ€å¸¸ç”¨çš„æ˜¯ä½¿ç”¨ç”± `Router è·¯ç”±å™¨ç»„ä»¶` åˆ›å»ºçš„å¯¼èˆªå™¨ï¼Œè€Œ `Router` æœ¬èº«æ˜¯ç”± `WidgetsApp` æˆ– `MaterialApp` åˆ›å»ºå’Œé…ç½®çš„ã€‚

- `Navigator.of(context)` è·å– Navigator å®ä¾‹ã€‚
- `ModalRoute.of(context)` è·å– Route å®ä¾‹ã€‚

MaterialApp ä¼šé…ç½®é¡¶å±‚çš„ Navigatorï¼Œå¹¶ä¸”æŒ‰ç…§ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾è·¯ç”±ï¼š
  1. å¯¹äº `/` æ ¹è·¯ç”±ï¼Œå¦‚æœ Navigator.home å±æ€§ä¸ä¸º nullï¼Œåˆ™ä½¿ç”¨ home ä½œä¸ºå¯¼èˆªå™¨å †æ ˆæ ¹è·¯ç”±ã€‚
  2. å¦åˆ™ï¼Œå¦‚æœ Navigator.routes è¡¨ä¸­åŒ…å« `/` è·¯ç”±çš„æ¡ç›®ï¼Œåˆ™ä½¿ç”¨ routes è¡¨ä¸­å¯¹åº”çš„é…ç½®ã€‚
  3. å¦åˆ™ï¼Œå¦‚æœæä¾›äº† `onGenerateRoute` å›è°ƒå‡½æ•°ï¼Œåˆ™è°ƒç”¨å®ƒã€‚
  4. æœ€åï¼Œå¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½å¤±è´¥ï¼Œåˆ™è°ƒç”¨ `onUnknownRoute`ã€‚

åœ¨ Navigator å‘½ä»¤å¼ API ä¸­ï¼ŒRoute å¯ä»¥é€šè¿‡ ç»„ä»¶è·¯ç”±ï¼ˆåŒ¿åè·¯ç”±ï¼‰å’Œ å‘½åè·¯ç”± çš„æ–¹å¼è¢« push è¿›æˆ–è€… pop å‡º Navigator çš„è·¯ç”±æ ˆã€‚
  - `åŒ¿åè·¯ç”±`ï¼Œæ˜¯æŒ‡è·³è½¬æ—¶ç›´æ¥åˆ›å»º Route å¯¹è±¡ï¼Œé€šè¿‡ `Navigator.push()` API ç›´æ¥è·¯ç”±è·³è½¬ã€‚
  - `å‘½åè·¯ç”±`ï¼Œæ˜¯æŒ‰åç§°å¼•ç”¨ Routeï¼Œè·¯ç”±åç§°ä½¿ç”¨ç±»ä¼¼è·¯å¾„çš„ç»“æ„ï¼ˆä¾‹å¦‚ï¼Œ'/a/b/c'ï¼‰ï¼ŒAppçš„ä¸»é¡µé¢è·¯ç”±é»˜è®¤ä¸º`/`ã€‚å…·ä½“å®ç°æ˜¯ï¼š
      - åœ¨ `MaterialApp.routes` å±æ€§ æˆ– onGenerateRoute é¢„å…ˆå®šä¹‰è·¯å¾„åç§°ã€‚



## Navigator.pages å£°æ˜å¼ API - Navigator 2.0

Navigator ä¼šå°†å…¶ Navigator.pages è½¬æ¢ä¸ºä¸€ä¸ª Route å¯¹è±¡æ ˆã€‚å½“ Navigator.pages å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘è·¯ç”±æ ˆçš„æ›´æ–°ï¼ŒNavigator ä¼šè°ƒæ•´å…¶å†…éƒ¨è·¯ç”±ä»¥åŒ¹é…æ–°çš„ Navigator.pages é…ç½®ã€‚

Navigator.pages API ä½¿ç”¨æ­¥éª¤ï¼š
  1ã€å®šä¹‰ä¸€ä¸ª Page çš„å­ç±»ï¼Œç”¨äºç»™ Navigator.pages å®šä¹‰ä¸€ä¸ª Page åˆ—è¡¨ã€‚
  2ã€æä¾› Navigator.onPopPage å›è°ƒå‡½æ•°ã€‚
  3ã€



# äºŒã€è·¯ç”± package

Navigator 2.0 ä¸ä»¥å¾€ä¸åŒçš„æ–¹é¢ä¸»è¦ä½“ç°åœ¨ï¼Œå°†è·¯ç”±çŠ¶æ€è½¬æ¢æˆäº†åº”ç”¨æœ¬èº«çš„çŠ¶æ€ã€‚é€šè¿‡ `Navigator.pages` å’Œ `MaterialApp.router` 2ç§æ–¹å¼æ¥å®ç°
è·¯ç”±çŠ¶æ€ç®¡ç†æ¯”è¾ƒå¤æ‚ï¼Œå¯¹äºå…·æœ‰é«˜çº§å¯¼èˆªå’Œè·¯ç”±è¦æ±‚çš„ Flutter åº”ç”¨ï¼ˆå¦‚ï¼šå…·æœ‰å¤šä¸ªNavigatorã€ ç‰¹å®š deep linkingï¼‰ï¼Œæ¨èä½¿ç”¨è·¯ç”± packageï¼ˆå¦‚ï¼š`go_router`ï¼‰ã€‚

* `go_router`ï¼Œ<https://pub-web.flutter-io.cn/packages/go_router>
